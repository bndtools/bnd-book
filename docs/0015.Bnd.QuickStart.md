version=pmwiki-2.1.18 ordered=1 urlencoded=1
agent=Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; en-US; rv:1.9.2.11) Gecko/20101012 Firefox/3.6.11
author=
csum=
ctime=1288194784
host=90.41.125.248
name=Bnd.QuickStart
rev=2
targets=
text=(:title 03 Quick Start:)%0a%0ahttp://www.aqute.biz/uploads/Code/bnd.png%0a%0a!03 Quick Start%0a%0aAssume we need to create a bundle in Eclipse. Each Java project in Eclipse has a set of sources and a class path. bnd therefore knows, about all the classes. However, it does not know how you want to structure your JARs/Bundles. It therefore needs a description file, the ''bnd file''. If you create such a file, you should give it the same as name as the bundle symbolic name with a @@.bnd@@ extension. For example @@aQute.example.bnd@@ is a well chosen name. If the name is not @@bnd.bnd@@, the file name without the .bnd extension is the default for your bundle symbolic name.%0a%0aLets build a bundle for the aQute OSGi tutorial Chat example. This bundle has 2 packages.%0a%0a* aQute.service.channel%0a* aQute.tutorial.chat%0a%0aThe @@aQute.service.channel@@ package must be exported and the other package may remain private. All packages that are referred from the source code must be imported. To achieve this, the following manifest will suffice:%0a%0a  Export-Package: aQute.service.channel; version=1.0 %0a  Private-Package: aQute.tutorial.chat%0a%0aThis is all you need! In Eclipse, you can select the bnd file and run the @@Make Bundle@@ command. This will create a JAR with the proper content:%0a%0a META-INF %0a   MANIFEST.MF %0a aQute/service/channel %0a   Channel.class %0a   aQute/tutorial/chat %0a   Chat$ChannelTracker.class %0a   Chat.class%0a%0aYou can run the same command from the command line%0a%0a bnd aQute.tutorial.chat.bnd%0a%0aNow take a look at the JAR file's manifest. With the command line version of you can do this with @@bnd aQute.tutorial.chat.jar@@. Otherwise just open the JAR with WinZip.%0a%0a Manifest-Version: 1%0a Bundle-Name: aQute.tutorial.chat%0a Private-Package: aQute.tutorial.chat%0a Import-Package: aQute.service.channel;version=1.0,%0a   org.osgi.framework; version=1.3,%0a   org.osgi.util.tracker;version=1.3%0a Bundle-ManifestVersion: 2%0a Bundle-SymbolicName: aQute.tutorial.chat%0a Export-Package: aQute.service.channel;version=1.0%0a Bundle-Version: 0%0a%0aAs you can see, bnd filled in a number of headers. The first header, Manifest-Version is required by the JAR standard. Bundle-Name is derived from the Bundle-SymbolicName because we did not specify it. The Private-Package header specifies the packages that ended up not exported. The Import-Package header comes from the packages that were referred to from the contained packages (private and exported). As you can see, bnd picked up versions for the imported packages. These versions come from the manifest of the JARs that source these packages, or from the packageinfo file. The Export-Package shows the export of the service package. On top of this, bnd has verified that all your headers really match the OSGi specifications, or you will get errors and warnings.%0a%0a
time=1288194829
title=03 Quick Start
author:1288194829=
diff:1288194829:1288194784:=3,4c3%0a%3c http://www.aqute.biz/uploads/Code/bnd.png%0a%3c %0a---%0a> %0a
host:1288194829=90.41.125.248
author:1288194784=
diff:1288194784:1288194784:=1,46d0%0a%3c (:title 03 Quick Start:)%0a%3c %0a%3c %0a%3c !03 Quick Start%0a%3c %0a%3c Assume we need to create a bundle in Eclipse. Each Java project in Eclipse has a set of sources and a class path. bnd therefore knows, about all the classes. However, it does not know how you want to structure your JARs/Bundles. It therefore needs a description file, the ''bnd file''. If you create such a file, you should give it the same as name as the bundle symbolic name with a @@.bnd@@ extension. For example @@aQute.example.bnd@@ is a well chosen name. If the name is not @@bnd.bnd@@, the file name without the .bnd extension is the default for your bundle symbolic name.%0a%3c %0a%3c Lets build a bundle for the aQute OSGi tutorial Chat example. This bundle has 2 packages.%0a%3c %0a%3c * aQute.service.channel%0a%3c * aQute.tutorial.chat%0a%3c %0a%3c The @@aQute.service.channel@@ package must be exported and the other package may remain private. All packages that are referred from the source code must be imported. To achieve this, the following manifest will suffice:%0a%3c %0a%3c   Export-Package: aQute.service.channel; version=1.0 %0a%3c   Private-Package: aQute.tutorial.chat%0a%3c %0a%3c This is all you need! In Eclipse, you can select the bnd file and run the @@Make Bundle@@ command. This will create a JAR with the proper content:%0a%3c %0a%3c  META-INF %0a%3c    MANIFEST.MF %0a%3c  aQute/service/channel %0a%3c    Channel.class %0a%3c    aQute/tutorial/chat %0a%3c    Chat$ChannelTracker.class %0a%3c    Chat.class%0a%3c %0a%3c You can run the same command from the command line%0a%3c %0a%3c  bnd aQute.tutorial.chat.bnd%0a%3c %0a%3c Now take a look at the JAR file's manifest. With the command line version of you can do this with @@bnd aQute.tutorial.chat.jar@@. Otherwise just open the JAR with WinZip.%0a%3c %0a%3c  Manifest-Version: 1%0a%3c  Bundle-Name: aQute.tutorial.chat%0a%3c  Private-Package: aQute.tutorial.chat%0a%3c  Import-Package: aQute.service.channel;version=1.0,%0a%3c    org.osgi.framework; version=1.3,%0a%3c    org.osgi.util.tracker;version=1.3%0a%3c  Bundle-ManifestVersion: 2%0a%3c  Bundle-SymbolicName: aQute.tutorial.chat%0a%3c  Export-Package: aQute.service.channel;version=1.0%0a%3c  Bundle-Version: 0%0a%3c %0a%3c As you can see, bnd filled in a number of headers. The first header, Manifest-Version is required by the JAR standard. Bundle-Name is derived from the Bundle-SymbolicName because we did not specify it. The Private-Package header specifies the packages that ended up not exported. The Import-Package header comes from the packages that were referred to from the contained packages (private and exported). As you can see, bnd picked up versions for the imported packages. These versions come from the manifest of the JARs that source these packages, or from the packageinfo file. The Export-Package shows the export of the service package. On top of this, bnd has verified that all your headers really match the OSGi specifications, or you will get errors and warnings.%0a%3c %0a
host:1288194784=90.41.125.248
