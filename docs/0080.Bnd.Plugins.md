version=pmwiki-2.1.18 ordered=1 urlencoded=1
agent=Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; en-US; rv:1.9.2.17) Gecko/20110420 Firefox/3.6.17
author=
csum=
ctime=1287242455
host=90.41.124.174
name=Bnd.Plugins
rev=7
targets=
text=(:title 41 Plugins:)%0a%0ahttp://www.aqute.biz/uploads/Code/bnd.png%0a%0a!41 Plugins%0aPlugins are objects that can extend the functionality of bnd. They are called from inside bnd when a certain action should take place. For example, bnd uses a repository and plugins provide the actual repository implementations. Or for example, the SpringComponent analyzes the Spring files and adds references found in that XML to the imports.%0a%0aA plugin is defined as:%0a%0a  PLUGIN ::= FQN ( ';' %3cdirective|attribute> )*%0a%0aThe following directive is defined for all plugin:%0a%0a||@@path:@@ ||A path to the jar file that contains the plugin. The directory/jar at that location is placed on your classpath for that plugin.||%0a%0abnd current supports the following plugin types:%0a%0a  /**%0a   * An optional interface for plugins. If a plugin implements %0a   * this interface then it can receive the remaining attributes %0a   * and directives given in its clause as%0a   * well as the reporter to use.%0a   */%0a  public interface Plugin {%0a    /**%0a     * Give the plugin the remaining properties.%0a     * When a plugin is declared, the clause can contain %0a     * extra properties. All the properties and directives %0a     * are given to the plugin to use.%0a     * @param map attributes and directives for this plugin's clause%0a     */%0a    void setProperties(Map%3cString,String> map);%0a    %0a    /**%0a     * Set the current reporter. This is called at init time. %0a     * This plugin should report all errors and warnings %0a     * to this reporter.%0a     * @param processor%0a     */%0a    void setReporter(Reporter processor);%0a }%0a%0a  public interface AnalyzerPlugin {%0a    /**%0a     * This plugin is called after analysis. The plugin %0a     * is free to modify the jar and/or change the classpath %0a     * information (see referred, contained).%0a     * This plugin is called after analysis of the JAR %0a     * but before manifest generation.%0a     * %0a     * @param analyzer%0a     * @return true if the classpace has been modified so that the bundle%0a     *         classpath must be reanalyzed%0a     * @throws Exception%0a     */%0a    boolean analyzeJar(Analyzer analyzer) throws Exception;%0a  }%0a%0a  public interface SignerPlugin {%0a    /**%0a     * Sign the current jar. The alias is the given certificate %0a     * keystore.%0a     * %0a     * @param builder   The current builder that contains the %0a                        jar to sign%0a     * @param alias     The keystore certificate alias%0a     * @throws Exception When anything goes wrong%0a     */%0a    void sign(Builder builder, String alias) throws Exception;%0a  }%0a%0a  public interface RepositoryPlugin {%0a    /**%0a     * Return a URL to a matching version of the given bundle.%0a     * %0a     * @param bsn%0a     *            Bundle-SymbolicName of the searched bundle%0a     * @param range%0a     *            Version range for this bundle,"latest" %0a     *            if you only want the%0a     *            latest, or null when you want all.%0a     * @return    A list of URLs sorted on version, lowest version %0a     *            is at index 0.%0a     *            null is returned when no files with the given %0a     *            bsn ould be found.%0a     * @throws Exception%0a     *             when anything goes wrong%0a     */%0a    File[] get(String bsn, String range) throws Exception;%0a    %0a    /**%0a     * Answer if this repository can be used to store files.%0a     * %0a     * @return true if writable%0a     */%0a    boolean canWrite();%0a    %0a    /**%0a     * Put a JAR file in the repository.%0a     * %0a     * @param jar%0a     * @throws Exception%0a     */%0a    File  put(Jar jar) throws Exception;%0a    %0a    /**%0a     * Return a list of bsns that are present in the repository.%0a     * %0a     * @param  regex if not null, match against the bsn and if %0a     *         matches, return otherwise skip%0a     * @return A list of bsns that match the regex parameter %0a     *         or all if regex is null%0a     */%0a    List%3cString> list(String regex);%0a    %0a    /**%0a     * Return a list of versions.%0a     */%0a    %0a    List%3cVersion> versions(String bsn);%0a  }%0a%0a  public interface MakePlugin {%0a%0a    /**%0a     * This plugin is called when Include-Resource detects %0a     * a reference to a resource that it can not find in the %0a     * file system.%0a     * %0a     * @param builder   The current builder%0a     * @param source    The source string (i.e. the place %0a     *                  where bnd looked)%0a     * @param arguments Any arguments on the clause in %0a     *                  Include-Resource%0a     * @return          A resource or null if no resource %0a     *                  could be made%0a     * @throws Exception%0a     */%0a    Resource make(Builder builder, String source, %0a          Map%3cString,String> arguments) throws Exception;%0a  }%0a%0a[[#make]]%0a!!!Make%0aMake plugins kick in when the @@Include-Resource@@ header tries to locate a resource but it cannot find that resource. The @@-make@@ option defines a number of patterns that are mapped to a make instruction.%0a%0aFor example, if you have%0a%0a  Include-Resource:       com.acme.Abc.ann%0a%0aIf no such resource is found, bnd will look in the -make instruction. This instruction associates a pattern with a plugin type. For example:%0a%0a       -make:                  (*.jar); type=xyz; abc=3; def="$1"%0a%0aThe first name part of the clause is matched against the unfound resource. All plugins are called sequentially until one returns non-null. The arguments on the -make clause are given as parameters to the make plugin. Normally all Make Plugins should verify the type field.%0a%0abnd has a bnd and a copy Make Plugin.%0a%0a!!!Buildin Plugins%0aSome plugins are provided by bnd itself.%0a%0a||aQute.lib.spring.SpringComponent||AnalyzerPlugin||This component will analyze the Spring XML for Spring DM and will add any classes in these files to the referred set of classes.||%0a||aQute.bnd.make.MakeBnd||MakePlugin||If Include-Resource can't find a referred resource it will use the make plugins to see if any of them can make the requested resource. The MakeBnd has type=bnd. This plugin can recursively call bnd to create embedded jars that are not created sequentially||%0a||aQute.bnd.make.MakeCopy||MakePlugin||Copies resources from other places in the file system||%0a||aQute.lib.deployer.FileRepo||RepositoryPlugin||Provides a file based repository.||%0a||aQute.bnd.maven.MavenRepository||RepositoryPlugin||Provides an interface to a the default maven repository in the user's home directory. Can be used with aQute.bnd.maven.MavenGroup to support converting bundle symbolic names to group and artifact id.||%0a
time=1308293837
title=41 Plugins
author:1308293837=
diff:1308293837:1288194488:=14,15c14,15%0a%3c ||@@path:@@ ||A path to the jar file that contains the plugin. The directory/jar at that location is placed on your classpath for that plugin.||%0a%3c %0a---%0a> ||@@path:@@ ||A path to the jar file that contains the plugin||%0a> %0a
host:1308293837=90.41.124.174
author:1288194488=
diff:1288194488:1288194435:=2,4d1%0a%3c %0a%3c http://www.aqute.biz/uploads/Code/bnd.png%0a%3c %0a
host:1288194488=90.41.125.248
author:1288194435=
diff:1288194435:1288194250:=1,2c1,2%0a%3c (:title 41 Plugins:)%0a%3c !41 Plugins%0a---%0a> (:title 11 Plugins:)%0a> !11 Plugins%0a
host:1288194435=90.41.125.248
author:1288194250=
diff:1288194250:1288194110:=1,2c1,2%0a%3c (:title 11 Plugins:)%0a%3c !11 Plugins%0a---%0a> (:title 08 Plugins:)%0a> !08 Plugins%0a
host:1288194250=90.41.125.248
author:1288194110=
diff:1288194110:1287246496:=1,2c1,2%0a%3c (:title 08 Plugins:)%0a%3c !08 Plugins%0a---%0a> (:title 07 Plugins:)%0a> !Plugins%0a
host:1288194110=90.41.125.248
author:1287246496=
diff:1287246496:1287242455:=1,2c1,2%0a%3c (:title 07 Plugins:)%0a%3c !Plugins%0a---%0a> [[#plugins]]%0a> !!!Plugins%0a
host:1287246496=90.41.247.141
author:1287242455=
diff:1287242455:1287242455:=1,163d0%0a%3c [[#plugins]]%0a%3c !!!Plugins%0a%3c Plugins are objects that can extend the functionality of bnd. They are called from inside bnd when a certain action should take place. For example, bnd uses a repository and plugins provide the actual repository implementations. Or for example, the SpringComponent analyzes the Spring files and adds references found in that XML to the imports.%0a%3c %0a%3c A plugin is defined as:%0a%3c %0a%3c   PLUGIN ::= FQN ( ';' %3cdirective|attribute> )*%0a%3c %0a%3c The following directive is defined for all plugin:%0a%3c %0a%3c ||@@path:@@ ||A path to the jar file that contains the plugin||%0a%3c %0a%3c bnd current supports the following plugin types:%0a%3c %0a%3c   /**%0a%3c    * An optional interface for plugins. If a plugin implements %0a%3c    * this interface then it can receive the remaining attributes %0a%3c    * and directives given in its clause as%0a%3c    * well as the reporter to use.%0a%3c    */%0a%3c   public interface Plugin {%0a%3c     /**%0a%3c      * Give the plugin the remaining properties.%0a%3c      * When a plugin is declared, the clause can contain %0a%3c      * extra properties. All the properties and directives %0a%3c      * are given to the plugin to use.%0a%3c      * @param map attributes and directives for this plugin's clause%0a%3c      */%0a%3c     void setProperties(Map%3cString,String> map);%0a%3c     %0a%3c     /**%0a%3c      * Set the current reporter. This is called at init time. %0a%3c      * This plugin should report all errors and warnings %0a%3c      * to this reporter.%0a%3c      * @param processor%0a%3c      */%0a%3c     void setReporter(Reporter processor);%0a%3c  }%0a%3c %0a%3c   public interface AnalyzerPlugin {%0a%3c     /**%0a%3c      * This plugin is called after analysis. The plugin %0a%3c      * is free to modify the jar and/or change the classpath %0a%3c      * information (see referred, contained).%0a%3c      * This plugin is called after analysis of the JAR %0a%3c      * but before manifest generation.%0a%3c      * %0a%3c      * @param analyzer%0a%3c      * @return true if the classpace has been modified so that the bundle%0a%3c      *         classpath must be reanalyzed%0a%3c      * @throws Exception%0a%3c      */%0a%3c     boolean analyzeJar(Analyzer analyzer) throws Exception;%0a%3c   }%0a%3c %0a%3c   public interface SignerPlugin {%0a%3c     /**%0a%3c      * Sign the current jar. The alias is the given certificate %0a%3c      * keystore.%0a%3c      * %0a%3c      * @param builder   The current builder that contains the %0a%3c                         jar to sign%0a%3c      * @param alias     The keystore certificate alias%0a%3c      * @throws Exception When anything goes wrong%0a%3c      */%0a%3c     void sign(Builder builder, String alias) throws Exception;%0a%3c   }%0a%3c %0a%3c   public interface RepositoryPlugin {%0a%3c     /**%0a%3c      * Return a URL to a matching version of the given bundle.%0a%3c      * %0a%3c      * @param bsn%0a%3c      *            Bundle-SymbolicName of the searched bundle%0a%3c      * @param range%0a%3c      *            Version range for this bundle,"latest" %0a%3c      *            if you only want the%0a%3c      *            latest, or null when you want all.%0a%3c      * @return    A list of URLs sorted on version, lowest version %0a%3c      *            is at index 0.%0a%3c      *            null is returned when no files with the given %0a%3c      *            bsn ould be found.%0a%3c      * @throws Exception%0a%3c      *             when anything goes wrong%0a%3c      */%0a%3c     File[] get(String bsn, String range) throws Exception;%0a%3c     %0a%3c     /**%0a%3c      * Answer if this repository can be used to store files.%0a%3c      * %0a%3c      * @return true if writable%0a%3c      */%0a%3c     boolean canWrite();%0a%3c     %0a%3c     /**%0a%3c      * Put a JAR file in the repository.%0a%3c      * %0a%3c      * @param jar%0a%3c      * @throws Exception%0a%3c      */%0a%3c     File  put(Jar jar) throws Exception;%0a%3c     %0a%3c     /**%0a%3c      * Return a list of bsns that are present in the repository.%0a%3c      * %0a%3c      * @param  regex if not null, match against the bsn and if %0a%3c      *         matches, return otherwise skip%0a%3c      * @return A list of bsns that match the regex parameter %0a%3c      *         or all if regex is null%0a%3c      */%0a%3c     List%3cString> list(String regex);%0a%3c     %0a%3c     /**%0a%3c      * Return a list of versions.%0a%3c      */%0a%3c     %0a%3c     List%3cVersion> versions(String bsn);%0a%3c   }%0a%3c %0a%3c   public interface MakePlugin {%0a%3c %0a%3c     /**%0a%3c      * This plugin is called when Include-Resource detects %0a%3c      * a reference to a resource that it can not find in the %0a%3c      * file system.%0a%3c      * %0a%3c      * @param builder   The current builder%0a%3c      * @param source    The source string (i.e. the place %0a%3c      *                  where bnd looked)%0a%3c      * @param arguments Any arguments on the clause in %0a%3c      *                  Include-Resource%0a%3c      * @return          A resource or null if no resource %0a%3c      *                  could be made%0a%3c      * @throws Exception%0a%3c      */%0a%3c     Resource make(Builder builder, String source, %0a%3c           Map%3cString,String> arguments) throws Exception;%0a%3c   }%0a%3c %0a%3c [[#make]]%0a%3c !!!Make%0a%3c Make plugins kick in when the @@Include-Resource@@ header tries to locate a resource but it cannot find that resource. The @@-make@@ option defines a number of patterns that are mapped to a make instruction.%0a%3c %0a%3c For example, if you have%0a%3c %0a%3c   Include-Resource:       com.acme.Abc.ann%0a%3c %0a%3c If no such resource is found, bnd will look in the -make instruction. This instruction associates a pattern with a plugin type. For example:%0a%3c %0a%3c        -make:                  (*.jar); type=xyz; abc=3; def="$1"%0a%3c %0a%3c The first name part of the clause is matched against the unfound resource. All plugins are called sequentially until one returns non-null. The arguments on the -make clause are given as parameters to the make plugin. Normally all Make Plugins should verify the type field.%0a%3c %0a%3c bnd has a bnd and a copy Make Plugin.%0a%3c %0a%3c !!!Buildin Plugins%0a%3c Some plugins are provided by bnd itself.%0a%3c %0a%3c ||aQute.lib.spring.SpringComponent||AnalyzerPlugin||This component will analyze the Spring XML for Spring DM and will add any classes in these files to the referred set of classes.||%0a%3c ||aQute.bnd.make.MakeBnd||MakePlugin||If Include-Resource can't find a referred resource it will use the make plugins to see if any of them can make the requested resource. The MakeBnd has type=bnd. This plugin can recursively call bnd to create embedded jars that are not created sequentially||%0a%3c ||aQute.bnd.make.MakeCopy||MakePlugin||Copies resources from other places in the file system||%0a%3c ||aQute.lib.deployer.FileRepo||RepositoryPlugin||Provides a file based repository.||%0a%3c ||aQute.bnd.maven.MavenRepository||RepositoryPlugin||Provides an interface to a the default maven repository in the user's home directory. Can be used with aQute.bnd.maven.MavenGroup to support converting bundle symbolic names to group and artifact id.||%0a
host:1287242455=90.41.247.141
